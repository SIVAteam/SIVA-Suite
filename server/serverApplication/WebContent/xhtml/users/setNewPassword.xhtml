<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR http://www.w3.org/TR/xhtml1/DTD/xhtml1 /xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
  
<body>
    <ui:composition template="../layout.xhtml">
        <ui:define name="title">#{lang.setNewPassword_title}</ui:define>
        <f:metadata>
                <f:event listener="#{authenticationAction.prePopulateUsername}"
                    type="preRenderView" />
                <f:viewParam id="hash" name="hash" value="#{resetPasswordBean.hash}" />
                <f:viewParam id="email" name="email" value="#{resetPasswordBean.email}" />
                <f:event listener="#{userAction.prepopulateSaveNewPassword}"
                    type="preRenderView" />
        </f:metadata>
        
        <ui:define name="content">
        <ui:define name="contextHelp">
            <h:outputLink id="contexHelp"
                value="#{request.contextPath}/xhtml/common/help.jsf#loginForgotten"
                target="_blank">#{lang.get_help_link}</h:outputLink>
        </ui:define>
            <h1>#{lang.setNewPassword_title}</h1>
            <h:message for="setNewPasswordForm" class="confirmMessage" />
            <h:messages globalOnly="true" class="errorMessage" />
            <h:form id="setNewPasswordForm">
                <div class="row">
                    <div class="col1">#{lang.user_field_new_password}</div>
                    <div class="col2">
                        <h:inputSecret id="password" value="#{resetPasswordBean.password}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" validator="PasswordComplexityValidator" />
                    </div>
                    <div class="col3"><h:message for="password" /></div>
                </div>
                <div class="row">
                    <div class="col1">#{lang.user_field_new_password_repeat}</div>
                    <div class="col2">
                        <h:inputSecret id="passwordRepeat" value="#{resetPasswordBean.passwordRepeat}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="passwordRepeat" /></div>
                </div>
                <br /><span class="description">(#{lang.user_field_register_description})</span>
                <div class="row">
                    <div class="col1 button_space">&nbsp;</div>
                    <div class="col2">
                        <h:commandButton action="#{userAction.saveNewPassword}" value="#{lang.setNewPassword_save_new_password_button}" />
                    </div>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</body>
</html>