<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR http://www.w3.org/TR/xhtml1/DTD/xhtml1 /xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<body>
    <ui:composition template="../layout.xhtml">
        <ui:define name="title">#{lang.installation_title}</ui:define>

        <ui:define name="content">
            <f:metadata>
                <f:event listener="#{authenticationAction.prePopulateUsername}" type="preRenderView"/>
                <f:event listener="#{installationAction.setup}" type="preRenderView" />
            </f:metadata>

            <h1>#{lang.installation_title}</h1>

            <h:message for="installationForm" class="confirmMessage" />
            <h:messages globalOnly="true" class="errorMessage" />

            <h:form id="installationForm">
                <div class="separator">
                    <div></div>
                    <h3>#{lang.installation_database_settings}</h3>
                    <div></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_database_host}</div>
                    <div class="col2">
                        <h:inputText id="databaseHost" value="#{installationBean.databaseHost}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="databaseHost" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_database_port}</div>
                    <div class="col2">
                        <h:inputText id="databasePort" value="#{installationBean.databasePort}" class="#{component.valid ? '' : 'error'}" validator="NumberValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="minNumberValidator" value="0" />
                            <f:attribute name="maxNumberValidator" value="65535" />
                            <f:attribute name="numberValidator_tooSmall_message" value="#{lang.installation_port_out_of_bounds}" />
                            <f:attribute name="numberValidator_tooBig_message" value="#{lang.installation_port_out_of_bounds}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="databasePort" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_database_name}</div>
                    <div class="col2">
                        <h:inputText id="databaseName" value="#{installationBean.databaseName}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="databaseName" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_database_user}</div>
                    <div class="col2">
                        <h:inputText id="databaseUser" value="#{installationBean.databaseUser}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="databaseUser" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_database_password}</div>
                    <div class="col2">
                        <h:inputSecret id="databasePassword" value="#{installationBean.databasePassword}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="databasePassword" /></div>
                </div>

                <div class="separator">
                    <div></div>
                    <h3>#{lang.installation_mail_server_settings}</h3>
                    <div></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_smtp_host}</div>
                    <div class="col2">
                        <h:inputText id="smtpHost" value="#{installationBean.smtpHost}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="smtpHost" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_smtp_port}</div>
                    <div class="col2">
                        <h:inputText id="smtpPort" value="#{installationBean.smtpPort}" class="#{component.valid ? '' : 'error'}" validator="NumberValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="minNumberValidator" value="0" />
                            <f:attribute name="maxNumberValidator" value="65535" />
                            <f:attribute name="numberValidator_tooSmall_message" value="#{lang.installation_port_out_of_bounds}" />
                            <f:attribute name="numberValidator_tooBig_message" value="#{lang.installation_port_out_of_bounds}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="smtpPort" /></div>
                </div>
                
                <div class="row">
                    <div class="col1">#{lang.installation_smtp_tls}</div>
                    <div class="col2">
                        <h:selectBooleanCheckbox id="smtpTLS" value="#{installationBean.smtpTLS}" /> #{lang.yes}
                    </div>
                    <div class="col3"><h:message for="smtpTLS" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_smtp_user}</div>
                    <div class="col2">
                        <h:inputText id="smtpUser" value="#{installationBean.smtpUser}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="smtpUser" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_smtp_password}</div>
                    <div class="col2">
                        <h:inputSecret id="smtpPassword" value="#{installationBean.smtpPassword}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="smtpPassword" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.installation_smtp_sender_name}</div>
                    <div class="col2">
                        <h:inputText id="smtpSenderName" value="#{installationBean.smtpSenderName}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="smtpSenderName" /></div>
                </div>
                
                <div class="row">
                    <div class="col1">#{lang.installation_smtp_sender}</div>
                    <div class="col2">
                        <h:inputText id="smtpSender" value="#{installationBean.smtpSender}" validator="MailValidator" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="mailValidator_message" value="#{lang.installation_invalid_email}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="smtpSender" /></div>
                </div>

                <div class="separator">
                    <div></div>
                    <h3>#{lang.installation_administrator_account}</h3>
                    <div></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_email}</div>
                    <div class="col2">
                        <h:inputText id="email" value="#{userBean.email}" class="#{component.valid ? '' : 'error'}" validator="MailValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="mailValidator_message" value="#{lang.installation_invalid_email}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="email" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_password}</div>
                    <div class="col2">
                        <h:inputSecret id="password" value="#{userBean.password}" class="#{component.valid ? '' : 'error'}" validator="PasswordComplexityValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="passwordComplexityValidator_message" value="#{lang.passwordComplexityValidator_message}" />
                        </h:inputSecret>
                    </div>
                    <div class="col3"><h:message for="password" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_password_repeat}</div>
                    <div class="col2">
                        <h:inputSecret id="passwordRepeat" value="#{userBean.passwordRepeat}" class="#{component.valid ? '' : 'error'}" required="true" requiredMessage="#{lang.field_required}" />
                    </div>
                    <div class="col3"><h:message for="passwordRepeat" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_academic_title}</div>
                    <div class="col2">
                        <h:selectOneMenu id="academicTitle" value="#{userBean.academicTitle}" class="#{component.valid ? '' : 'error'}">
                         <f:selectItem itemValue="#{lang.user_field_academic_title_none}" />
                         <f:selectItem itemValue="#{lang.user_field_academic_title_phd}" />
                         <f:selectItem itemValue="#{lang.user_field_academic_title_prof}" />
                        </h:selectOneMenu>
                    </div>
                    <div class="col3"><h:message for="academicTitle" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_first_name}</div>
                    <div class="col2">
                        <h:inputText id="firstName" value="#{userBean.firstName}" class="#{component.valid ? '' : 'error'}" validator="LengthValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="maxLengthValidator" value="#{lang.installation_first_name_max_length}" />
                            <f:attribute name="lengthValidator_tooLong_message" value="#{lang.installation_first_name_too_long}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="firstName" /></div>
                </div>

                <div class="row">
                    <div class="col1">#{lang.user_field_last_name}</div>
                    <div class="col2">
                        <h:inputText id="lastName" value="#{userBean.lastName}" class="#{component.valid ? '' : 'error'}" validator="LengthValidator" required="true" requiredMessage="#{lang.field_required}">
                            <f:attribute name="maxLengthValidator" value="#{lang.installation_last_name_max_length}" />
                            <f:attribute name="lengthValidator_tooLong_message" value="#{lang.installation_last_name_too_long}" />
                        </h:inputText>
                    </div>
                    <div class="col3"><h:message for="lastName" /></div>
                </div>
                <div class="row">
                    <div class="col1 button_space"></div>
                    <div class="col2">
                        <h:commandButton value="#{lang.installation_finish_button}" action="#{installationAction.setup}" />
                    </div>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</body>
</html>